<template>
  <div class="tarot-learning">
    <ul class="tarot-card-list">
      <!-- Card List -->
      <h5 class="tarot-card-list-label">Card List</h5>

      <md-input
        type="text"
        label="Add tarot card"
        class="todo-input"
        value.bind="addTarotCardInputValue"
      ></md-input>

      <a
        md-button="floating: true; pulse.bind: pulse;"
        md-waves="color: light; circle: true;"
        click.delegate="addTarotCard(addTarotCardInputValue)"
      >
        <i class="material-icons add-tarot-card">add</i>
      </a>

      <li
        class="
          tarot-card
          ${selectedCard === tarotCard ? 'active' : ''}
        "
        repeat.for="tarotCard of tarotCards"
        click.delegate="selectCard(tarotCard)"
      >
        ${tarotCard.name}
      </li>
    </ul>

    <!-- Explanation -->
    <div class="tarot-explanation">
      <div class="tarot-explanation-header">
        <h5 class="tarot-explanation-label">Explanation</h5>

        <div class="tarot-explanation-source-container">
          <!-- Explanation source -->
          <div
            class="
              tarot-explanation-source
              ${selectedExplanation === explanation ? 'active' : ''}
            "
            repeat.for="explanation of selectedCard.explanation"
            click.delegate="selectExplanation(explanation)"
          >
            <input
              class="inline-input"
              type="text"
              value.bind="explanation.source"
              focus.trigger="updateTarotCardExplanationAfterShortcut(selectedExplanation, 'source')"
              blur.trigger="removeUpdateCardExplanationShortcut()"
            />
          </div>
        </div>
        <!-- Explanation source Add button -->
        <a
          md-button="floating: true; pulse.bind: pulse;"
          md-waves="color: light; circle: true;"
          click.delegate="addTarotExplanation(addTarotExplanationInputValue)"
        >
          <i class="material-icons add-tarot-card">add</i>
        </a>
      </div>

      <textarea
        value.bind="selectedExplanation.content"
        focus.trigger="updateTarotCardExplanationAfterShortcut(selectedExplanation, 'content')"
        blur.trigger="removeUpdateCardExplanationShortcut()"
      >
      </textarea>
    </div>
  </div>
</template>
